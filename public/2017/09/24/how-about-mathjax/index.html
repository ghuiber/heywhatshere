<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.31.1" />


<title>How about MathJax? - Hey, what&#39;s here?</title>
<meta property="og:title" content="How about MathJax? - Hey, what&#39;s here?">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/mugshot.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/ghuiber/heywhatshere">GitHub</a></li>
    
    <li><a href="https://www.linkedin.com/in/ghuiber/">LinkedIn</a></li>
    
    <li><a href="mailto:ghuiber@gmail.com">Mail</a></li>
    
    <li><a href="https://twitter.com/ghuiber">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">4 min read</span>
    

    <h1 class="article-title">How about MathJax?</h1>

    
    <span class="article-date">2017/09/24</span>
    

    <div class="article-content">
      <p>The default Lithium theme in blogdown comes with MathJax support. This big Sigma here – <span class="math inline">\(\Sigma\)</span> – will show like the Greek upper case Sigma if you have it.</p>
<p>This theme is very nice but if you want to use another, two good candidates are <a href="https://github.com/calintat/minimal">Minimal</a> and <a href="https://github.com/jbub/ghostwriter">Ghostwriter</a>. To make them useful for occasional mathematics typesetting, you will want to enable MathJax support there too.</p>
<div id="submodules" class="section level2">
<h2>Submodules</h2>
<p>If you install extra themes such as Minimal and Ghostwriter as Git submodules following instructions <a href="https://github.com/calintat/minimal">here</a> their remotes will point to the originals. You will want instead to fork the originals, then make your remotes point to your forks, and set the originals as upstream repos. This way you can make any changes you want, push them to your own fork, and maintain them that way. There’s even an easy way to pull them all at once. It is described <a href="https://stackoverflow.com/questions/1030169/easy-way-to-pull-latest-of-all-git-submodules">here</a>. If you screw anything up, you can discard all changes and pull from upstream as explained <a href="https://stackoverflow.com/questions/13781388/git-discard-all-changes-and-pull-from-upstream">here</a>.</p>
<p>My remotes look like this:</p>
<pre><code>Gabis-New-MacBook-Pro:heywhatshere ghuiber$ git remote -v
origin  git@github.com:ghuiber/heywhatshere.git (fetch)
origin  git@github.com:ghuiber/heywhatshere.git (push)
Gabis-New-MacBook-Pro:heywhatshere ghuiber$ cd themes/ghostwriter/
Gabis-New-MacBook-Pro:ghostwriter ghuiber$ git remote -v
origin  git@github.com:ghuiber/ghostwriter.git (fetch)
origin  git@github.com:ghuiber/ghostwriter.git (push)
upstream    https://github.com/jbub/ghostwriter.git (fetch)
upstream    https://github.com/jbub/ghostwriter.git (push)
Gabis-New-MacBook-Pro:ghostwriter ghuiber$ cd ../minimal/
Gabis-New-MacBook-Pro:minimal ghuiber$ git remote -v
origin  git@github.com:ghuiber/minimal.git (fetch)
origin  git@github.com:ghuiber/minimal.git (push)
upstream    https://github.com/calintat/minimal.git (fetch)
upstream    https://github.com/calintat/minimal.git (push)</code></pre>
</div>
<div id="back-to-mathjax" class="section level2">
<h2>Back to MathJax</h2>
<p>The Lithium theme comes with a script called <code>math-code.js</code> here:</p>
<pre class="r"><code>library(&#39;here&#39;)</code></pre>
<pre><code>## here() starts at /Users/ghuiber/heywhatshere</code></pre>
<pre class="r"><code>dir(file.path(here(), &#39;themes/hugo-lithium-theme/static/js&#39;))</code></pre>
<pre><code>## [1] &quot;math-code.js&quot;</code></pre>
<p>I copied this script to Ghostwriter’s <code>static/js</code> folder, and I copied the whole <code>js</code> folder to Minimal’s <code>static</code> folder at the command line:</p>
<pre><code>cp themes/hugo-lithium-theme/static/js/math-code.js themes/ghostwriter/static/js/
cp -R themes/hugo-lithium-theme/static/js themes/minimal/static/</code></pre>
<p>I had to edit the other themes’ respective <code>config.toml</code> files with some extra parameters, so I first made sure to preserve the originals:</p>
<pre><code>cp themes/ghostwriter/exampleSite/config.toml themes/ghostwriter/exampleSite/config_example.toml
cp themes/minimal/exampleSite/config.toml themes/minimal/exampleSite/config_example.toml</code></pre>
<p>Then I copied over this section of the <code>[params]</code> block from the Lithium <code>config.toml</code> file to the <code>[params]</code> block in each of the other themes’ own <code>config.toml</code> file. Notice that this block handles both code highlighting and MathJax. I want to take care of both at once. If this screws anything up, I’ll just revert to the <code>config_example.toml</code> that I saved:</p>
<pre><code>    # options for highlight.js (version, additional languages, and theme)
    highlightjsVersion = &quot;9.11.0&quot;
    highlightjsCDN = &quot;//cdn.bootcss.com&quot;
    highlightjsLang = [&quot;r&quot;, &quot;yaml&quot;]
    highlightjsTheme = &quot;github&quot;

    MathJaxCDN = &quot;//cdn.bootcss.com&quot;
    MathJaxVersion = &quot;2.7.1&quot;</code></pre>
<p>In addition to the <code>math-code.js</code> script in the <code>static/js</code> folder and the parameters in <code>config.toml</code>, Hugo needs to see these pieces called from inside one of the html files in <code>layouts/partials</code>.</p>
</div>
<div id="how-does-lithium-do-it" class="section level2">
<h2>How does Lithium do it?</h2>
<p>The Lithium theme has <code>footer_mathjax.html</code>, <code>footer_highlightjs.html</code> and <code>header_highlightjs.html</code> in the <code>partials</code> folder.</p>
<p>Here’s the bottom of <code>themes/hugo-lithium-theme/layouts/partials/footer.html</code>:</p>
<pre><code>    {{ partial &quot;footer_highlightjs&quot; . }}
    {{ partial &quot;footer_mathjax&quot; . }}
    {{ template &quot;_internal/google_analytics.html&quot; . }}
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>And here’s the bottom of <code>themes/hugo-lithium-theme/layouts/partials/head.html</code>:</p>
<pre><code>{{ partial &quot;head_highlightjs&quot; . }}
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ &quot;css/fonts.css&quot; | relURL }}&quot; media=&quot;all&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ &quot;css/main.css&quot; | relURL }}&quot; media=&quot;all&quot;&gt;
{{ range .Site.Params.customCSS }}
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ . | relURL }}&quot;&gt;
{{ end }}
{{ partial &quot;head_custom&quot; . }}</code></pre>
<p>This <code>head.html</code> file is called inside the <code>&lt;head&gt;&lt;/head&gt;</code> tags of <code>header.html</code> with a partial call. Here’s that file:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;{{ .Site.LanguageCode }}&quot;&gt;
  &lt;head&gt;
    {{ partial &quot;head.html&quot; . }}
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;wrapper&quot;&gt;
      &lt;header class=&quot;header&quot;&gt;
        {{ partial &quot;nav.html&quot; . }}
      &lt;/header&gt;</code></pre>
<p>So: the code in <code>head_highlightsjs.html</code> needs to make its way into the head section of <code>header.html</code> and the Lithium theme is doing this through an indirect call: <code>header.html</code> calls <code>head.html</code> which then calls <code>head_highlightjs.html</code>. OK.</p>
</div>
<div id="how-about-the-other-two-templates" class="section level2">
<h2>How about the other two templates?</h2>
<p>Neither Minimal nor Ghostwriter have <code>footer_mathjax.html</code>, <code>footer_highlightjs.html</code> and <code>header_highlightjs.html</code> in the <code>partials</code> folder so I’ll start by copying them over in both places.</p>
</div>
<div id="how-might-ghostwriter-use-these-three-files" class="section level2">
<h2>How might Ghostwriter use these three files?</h2>
<p>The Ghostwriter theme handles calls to its own .js files from inside <code>footer.html</code>. Here’s the bottom of <code>themes/ghostwriter/layouts/partials/footer.html</code>:</p>
<pre><code>        &lt;script src=&quot;{{ .Site.BaseURL }}js/scripts.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>So I could replace the above with</p>
<pre><code>        &lt;script src=&quot;{{ .Site.BaseURL }}js/scripts.js&quot;&gt;&lt;/script&gt;
        {{ partial &quot;footer_highlightjs&quot; . }}
        {{ partial &quot;footer_mathjax&quot; . }}
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>I also need to make a call to <code>header_highlightjs.html</code> from Ghostwriter’s own <code>header.html</code> partial and make it inside the <code>&lt;head&gt;&lt;/head&gt;</code> tags. So here’s the relevant piece of <code>themes/ghostwriter/layouts/partials/header.html</code>:</p>
<pre><code>        {{ if .RSSLink }}
            &lt;link href=&quot;{{ .RSSLink }}&quot; rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot;&gt;
        {{ end }}
    &lt;/head&gt;</code></pre>
<p>And I’m going to change it to</p>
<pre><code>        {{ if .RSSLink }}
            &lt;link href=&quot;{{ .RSSLink }}&quot; rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot;&gt;
        {{ end }}
        {{ partial &quot;head_highlightjs&quot; . }}
    &lt;/head&gt;</code></pre>
</div>
<div id="how-about-minimal" class="section level2">
<h2>How about Minimal?</h2>
<p>The Minimal theme – which didn’t come with a <code>static/js</code> folder of its own – has a <code>js.html</code> file that calls some .js files from various locations on the internets. So, I could use the same procedure: copy over three partials, call two of them from the footer, one from the header.</p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This worked: with these modifications both Minimal and Ghostwriter have MathJax enabled. This will do for an exploration of other themes. I decided to keep Lithium.</p>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

